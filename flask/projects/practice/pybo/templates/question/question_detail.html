<!-- static 디렉터리의 style.css 파일을 연결한다. -->
<!-- url_for 을 통해 정적 파일의 URL을 찾을 수 있다. -->
{% extends "base.html" %} {% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='style.css')}}" />

<h1>{{ question.subject }}</h1>

<div style="display: flex; justify-content: space-between">
  <div>{{ question.content }}</div>
  <div>{{ question.user.username }}</div>
  <div>{{ question.createdAt|datetime }}</div>
</div>

{% if g.user == question.user %}
<div>
  <a href="{{ url_for('question.modify', question_id=question.id) }}"
    >수정하기</a
  >
</div>
{% endif %}

<!-- | 은 템플릿 필터. -->
<h5>{{ question.answer_set|length }}개의 답변이 있습니다.</h5>
<div>
  <ul>
    {% for answer in question.answer_set %}
    <li>
      {{ answer.content }} {{ answer.user.username }} {{ answer.createdAt |
      datetime }}
    </li>
    {% endfor %}
  </ul>
</div>

<form
  action="{{ url_for('answer.create', question_id=question.id ) }}"
  method="post"
>
  <!-- 오류표시 Start -->
  {% for field, errors in form.errors.items() %}
  <div class="alert alert-danger" role="alert">
    <strong>{{ form[field].label }}</strong>: {{ ', '.join(errors) }}
  </div>
  {% endfor %}
  <!-- 오류표시 End -->
  {{form.csrf_token}}
  <div>
    {% if not g.user %}
    <span>답글을 남기고 싶으시면 로그인을 해주세요.</span>
    {% else %}
    <textarea name="content" id="content" rows="15"></textarea>
    <input type="submit" value="답변 등록" />
    {% endif %}
  </div>
</form>
{% endblock %}
